(function(){const p=window.location.pathname.replace(/\/$/,'');document.querySelectorAll('[data-path]').forEach(l=>{const lp=l.getAttribute('data-path').replace(/\/$/,'');if(lp===p){l.classList.add('active');l.setAttribute('aria-current','page');}})})();
(function(){const b=document.getElementById('backToTop');if(!b)return;window.addEventListener('scroll',()=>{b.style.display=window.scrollY>240?'block':'none'});b.addEventListener('click',()=>window.scrollTo({top:0,behavior:'smooth'}))})();
(function(){const m=document.getElementById('lightboxModal');if(!m)return;const i=m.querySelector('img');const c=m.querySelector('.modal-caption');document.querySelectorAll('.js-lightbox').forEach(el=>{el.addEventListener('click',()=>{i.src=el.getAttribute('data-full')||el.src;i.alt=el.alt||'';c.textContent=el.getAttribute('data-caption')||el.alt||'';const mb=new bootstrap.Modal(m);mb.show();});});})();